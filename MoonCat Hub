-- Tải Linoria UI
local success, Library = pcall(function()
    return loadstring(game:HttpGet("https://raw.githubusercontent.com/violin-suzutsuki/LinoriaLib/main/Library.lua"))()
end)

if not success then
    warn("Không thể tải Linoria UI: " .. Library)
    return
end

-- Tạo giao diện
local Window = Library:CreateWindow("MoonCat Hub - Blox Fruits")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Workspace = game:GetService("Workspace")

-- Biến trạng thái
local toggles = {
    AutoFarmLevel = false,
    ESP = false,
}
local attackSpeed = 0.5
local espInstances = {}

-- Hàm dịch chuyển
local function teleportTo(pos)
    if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
        LocalPlayer.Character.HumanoidRootPart.CFrame = pos
    end
end

-- Hàm dọn dẹp ESP
local function clearESP()
    for _, esp in pairs(espInstances) do
        if esp then
            esp:Destroy()
        end
    end
    espInstances = {}
end

-- Tab Auto Farm
local FarmTab = Window:AddTab("Farm")
local FarmGroup = FarmTab:AddLeftGroupbox("Farm Features")
FarmGroup:AddToggle("AutoFarmLevel", {
    Text = "Auto Farm Level",
    Default = false,
    Callback = function(state)
        toggles.AutoFarmLevel = state
        if state then
            spawn(function()
                while toggles.AutoFarmLevel and LocalPlayer.Character do
                    if next(Workspace.Enemies:GetChildren()) then
                        for _, enemy in pairs(Workspace.Enemies:GetChildren()) do
                            if enemy:FindFirstChild("Humanoid") and enemy.Humanoid.Health > 0 then
                                teleportTo(enemy.HumanoidRootPart.CFrame * CFrame.new(0, 5, 0))
                                wait(attackSpeed)
                            end
                        end
                    else
                        Library:Notify("Không tìm thấy quái!", 3)
                        wait(2)
                    end
                    wait(1)
                end
            end)
        end
    end
})

-- Tab Teleport
local TeleportTab = Window:AddTab("Teleport")
local TeleportGroup = TeleportTab:AddLeftGroupbox("Teleport Features")
TeleportGroup:AddDropdown("TeleportIsland", {
    Text = "Teleport to Island",
    Values = {"Starter Pirate Island", "Kingdom of Rose", "Floating Turtle"},
    Default = 1,
    Callback = function(selected)
        local locations = {
            ["Starter Pirate Island"] = CFrame.new(1050, 17, 1350),
            ["Kingdom of Rose"] = CFrame.new(-2000, 17, -2000),
            ["Floating Turtle"] = CFrame.new(-12550, 332, -7870)
        }
        teleportTo(locations[selected])
        Library:Notify("Đã dịch chuyển đến " .. selected, 3)
    end
})

-- Tab ESP
local ESPTab = Window:AddTab("ESP")
local ESPGroup = ESPTab:AddLeftGroupbox("ESP Features")
ESPGroup:AddToggle("ESP", {
    Text = "ESP",
    Default = false,
    Callback = function(state)
        toggles.ESP = state
        if state then
            spawn(function()
                while toggles.ESP and LocalPlayer.Character do
                    for _, obj in pairs(Workspace:GetChildren()) do
                        if obj:FindFirstChild("Humanoid") and not obj:FindFirstChild("BillboardGui") then
                            local esp = Instance.new("BillboardGui", obj)
                            esp.Size = UDim2.new(0, 100, 0, 50)
                            esp.StudsOffset = Vector3.new(0, 3, 0)
                            local text = Instance.new("TextLabel", esp)
                            text.Size = UDim2.new(1, 0, 1, 0)
                            text.Text = obj.Name
                            text.BackgroundTransparency = 1
                            text.TextColor3 = Color3.fromRGB(255, 0, 0)
                            table.insert(espInstances, esp)
                        end
                    end
                    wait(5)
                end
            end)
        else
            clearESP()
            Library:Notify("ESP đã tắt!", 3)
        end
    end
})

-- Thông báo khởi động
Library:Notify("MoonCat Hub (Linoria UI) đã chạy!", 5)
